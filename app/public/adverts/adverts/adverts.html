<div class="header">
    <navigation></navigation>
</div>

<div class="container" >
    <div class="col-md-10 col-md-offset-1">
        <div class="row text-center">
            <h1>Liste des annonces</h1>
        </div>
        <br>
        <div class="row">        
            <div class="col-md-2"> 
                <h5><strong>Trier par</strong></h5> 
            </div> 
            <div class="col-md-3">
                <select class="form-control"  ng-model="type">
                    <option value="">Type</option>
                    <option value="offre">Offre de service</option>
                    <option value="demande">Demande</option>
                </select>
            </div>    
            <div class="col-md-3">
                <select class="form-control" ng-model="regions">
                    <option value="">Région</option>
                    <option ng-repeat="option in region.regionOptions" value="{{option.regions}}">{{option.regions}}</option>
                </select>
            </div>
            <div class="col-md-3">
                <select class="form-control" ng-model="categories">
                    <option value="">Catégorie</option>
                    <option ng-repeat="option in category.catOptions" value="{{option.categories}}">{{option.categories}}</option>
                </select>
            </div>    
        </div>
        <br>
        <div class="row">
            <div class ="advertHome" ng-repeat="advert in adverts.slice(((currentPage - 1) * itemsPerPage), ((currentPage) * itemsPerPage))| filter:type | filter:regions | filter:categories |filter: {answered:false}">
                <div class="col-md-3">
                    <h4 class="text-capitalize">{{advert.type}}</h4>
                    <img ng-if="advert.media !== 'abc'" class="media-object" style="width:150px; height:120px;" ng-src="uploads/{{advert.media}}">
                </div>
                <div class="col-md-6">
                    <h3 class="text-capitalize">{{advert.title}}</h3>
                    <p style="text-align: left; margin-left: 10px;">{{advert.content}}</p> 
                    <a href="#/replyToAd/{{advert._id}}" class="btn btn-sm btn-primary">Répondre</a>
                </div>
                <div class="col-md-3">
                    <p><i><small>postée par : </small></i>{{advert.author}}</p> 
                    <p><i><small>catégorie : </small></i>{{advert.categories}}</p>
                    <p><i><small>le : </small></i>{{advert.created_at| date :'dd MMM yyyy'}}</p>
                    <p><i><small>zone : </small></i>{{advert.regions}}</p>                                           
                </div>
                <div ng-if="adverts.length === 0">Pas encore d'annonces</div> 
            </div>  
        </div>
        <div class="text-center">
            <uib-pagination total-items="totalItems" ng-model="currentPage" ng-change="pageChanged()" class="pagination-sm" items-per-page="itemsPerPage"></uib-pagination>     
        </div>
        <div class="row">
            <div class="col-md-6 col-md-offset-3">
                <a href="#/formAdvert" class="btn btn-block btn-ghost-white">Déposer une annonce</a>
            </div>
        </div> 
        <br>
    </div>
</div>